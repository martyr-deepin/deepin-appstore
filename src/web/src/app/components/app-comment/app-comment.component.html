<dialog #dialog (click)="dialog.close()" class="loginDialog">
  <ng-container *ngIf="!isLoggedIn">
    <iframe [src]="authUrl" frameborder="0" [hidden]="iframeLoading" (load)="iframeLoad($event)"></iframe>
    <div class="progress" *ngIf="iframeLoading">
      <progress></progress>
      <div>ç™»å½•é¡µé¢åŠ è½½ä¸­...</div>
    </div>
  </ng-container>
</dialog>

<br>
<div class="comment" *ngIf="!isLoggedIn;else comment">
  <div class="title">
    <span>è¯·ç™»å½•åå¯¹åº”ç”¨è¿›è¡Œè¯„ä»·</span>
    <a href="">æ³¨å†Œ</a>
  </div>
  <div class="input-box">
    <div class="loginBtn" (click)="dialog.showModal()" (blur)="log($event)" #btn>ç™»å½•</div>
    <textarea class="input" readonly></textarea>
    <span class="placeholder" hidden>è¯·è¾“å…¥è¯„è®ºå†…å®¹</span>
  </div>
</div>
<ng-template #comment>
  <div class="comment">
    <div class="title">
      <span class="star">
        <div>æ‚¨çš„è¯„åˆ†</div>
        <dstore-star #star [readonly]="false"></dstore-star>
        <div>{{star.rateHover||star.rate}}åˆ†</div>
      </span>
      <a href=""></a>
    </div>
    <div class="input-box" (click)="input.focus()">
      <textarea class="input" #input (keyup)="null"></textarea>
      <span class="placeholder" [hidden]="input.value">è¯·è¾“å…¥è¯„è®ºå†…å®¹</span>
    </div>
  </div>
  <button class="submitBtn" [disabled]="!input.value || !star.rate">æäº¤è¯„è®º</button>
</ng-template>
<br>
<br>
<div class="paging">
  <div class="title">
    ç”¨æˆ·è¯„ä»·
  </div>
</div>
<div class="commentList" *ngIf="commentListObs|async as cs">
  <div class="commentItem" *ngIf="cs.length==0">
    ç©ºçš„åˆ—è¡¨
  </div>
  <div class="commentItem" *ngFor="let c of cs">
    <div class="head">
      <img src="http://10.0.12.148:8000/images/rooarr-icon.svg" class="icon">
      <span>{{c.user.name}}</span>
    </div>
    <div class="body">
      <div class="rate">
        <dstore-star [rate]="c.rate"></dstore-star>
        <span>{{c.rate}}åˆ†</span>
      </div>
      <span>{{c.content}}</span>
    </div>
    <div class="time">
      {{c.createTime}}
    </div>
    <div class="like">
      ({{c.likeCount}})ğŸ‘
    </div>
  </div>
</div>
